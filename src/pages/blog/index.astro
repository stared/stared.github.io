---
import { getCollection } from 'astro:content';
import BaseLayout from '@/layouts/BaseLayout.astro';
import BlogList from '@/components/BlogList.vue';
import { createPosts } from '@/lib/postData';
import {Content as BlogIntro} from '@/content/textComponents/blog.md';

const blogEntries = await getCollection('blog');
const externalEntries = await getCollection('externalArticles');
const posts = createPosts(blogEntries, externalEntries.map(e => e.data));
---

<BaseLayout title="Blog" description="Read blog posts by Piotr MigdaÅ‚.">
  <BlogIntro />
  <BlogList client:load posts={posts} />
</BaseLayout>
