---
import { getCollection, getEntry } from 'astro:content';
import BaseLayout from '@/layouts/BaseLayout.astro';
import BlogList from '@/components/BlogList.vue';
import type { ExternalPost } from '@/lib/postData';

const blogPosts = await getCollection('blog');
const externalArticlesData = await getEntry('externalArticles', 'external-articles');
const externalPosts = externalArticlesData.data.items as ExternalPost[];
const allPosts = [...blogPosts, ...externalPosts];

const blogTextContent = await getEntry('textComponents', 'blog');
const { Content } = await blogTextContent.render();
---

<BaseLayout title="Blog" description="Read blog posts by Piotr MigdaÅ‚.">
  <Content />
  <BlogList client:only="vue" posts={allPosts} />
</BaseLayout>
